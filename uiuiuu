<template>
  <div id="app">
    <router-view />
  </div>
</template>
 
<script>
// å¼•å…¥CnNotifyç»„ä»¶
import CnNotify from "@/components/common/CnNotify/index.vue"
export default  {
  name:  'App',
  components: {
    CnNotify, // æ³¨å†Œç»„ä»¶
  },
  mounted() {
    this.watchUpdate()
  },
  methods: {
      watchUpdate() {
        window.addEventListener("onmessageUpdate", (res) => {
          console.log("ğŸš€ ~ file: App.vue:20 ~ window.addEventListener ~ res:", res)
          let msg = res.detail.msg,
          version = res.detail.version
          this.$notify({
            title: "ç‰ˆæœ¬æ›´æ–°æç¤º",
            duration: 0,
            position: "bottom-right",
            dangerouslyUseHTMLString: true,
            message: this.$createElement("CnNotify", {
              // ä½¿ç”¨è‡ªå®šä¹‰ç»„ä»¶
              ref: "CnNotify",
              props: {
                msg: msg,
                version: version
              },
            }),
            customClass:'versionNotifyStyle', //è‡ªå®šä¹‰ç±»å
          })
        })
      },
  },
}
</script>
